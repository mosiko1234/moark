# ⛵ משה בתיבה - מסמך ארכיטקטורה להצגה

**מערכת העברה מאובטחת של קוד בין רשתות מבודדות**

---

## 📋 תוכן עניינים

1. [סקירה כללית](#סקירה-כללית)
2. [תרשים ארכיטקטורה כללי](#תרשים-ארכיטקטורה-כללי)
3. [שלב 1: אריזה ברשת האינטרנט (moark-pack)](#שלב-1-אריזה-ברשת-האינטרנט)
4. [שלב 2: העברה פיזית](#שלב-2-העברה-פיזית)
5. [שלב 3: קליטה ברשת הפנימית (moark-ingest)](#שלב-3-קליטה-ברשת-הפנימית)
6. [תפקידים ואחריות](#תפקידים-ואחריות)
7. [אבטחה ובקרה](#אבטחה-ובקרה)

---

## 🎯 סקירה כללית

### מה המערכת עושה?

**"משה בתיבה"** היא מערכת להעברה מאובטחת של קוד מקור (Git repositories) וארטיפקטים מ-CI/CD בין:
- **רשת האינטרנט** (External Network) - שם אורזים את הקוד
- **רשת פנימית מבודדת** (Air-Gapped Network) - שם מעלים את הקוד לגיט הפנימי

### למה צריך את זה?


```
┌─────────────────────────────────────────────────────────────────────────┐
│                                                                         │
│   🌐 רשת האינטרנט                    🔒 רשת פנימית מבודדת              │
│                                                                         │
│   ┌─────────────┐                    ┌─────────────┐                   │
│   │   GitHub    │      ❌ אין        │   GitLab    │                   │
│   │   GitLab    │ ◄──── חיבור ────► │   פנימי     │                   │
│   │   חיצוני    │      רשת!         │             │                   │
│   └─────────────┘                    └─────────────┘                   │
│                                                                         │
│   הבעיה: איך מעבירים קוד בצורה מאובטחת?                                │
│                                                                         │
│   הפתרון: "משה בתיבה" - העברה פיזית באמצעות USB                        │
│                                                                         │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 🏗️ תרשים ארכיטקטורה כללי

```
┌─────────────────────────────────────────────────────────────────────────────────┐
│                                                                                 │
│                        🌐 רשת האינטרנט (EXTERNAL NETWORK)                       │
│                                                                                 │
│   ┌─────────────────────────────────────────────────────────────────────────┐  │
│   │                                                                         │  │
│   │   👨‍💻 מפתח                                                              │  │
│   │      │                                                                  │  │
│   │      │ מריץ moark-pack-ui                                              │  │
│   │      ▼                                                                  │  │
│   │   ┌─────────────────────────────────────────┐                          │  │
│   │   │        ⛵ moark-pack                    │                          │  │
│   │   │                                         │                          │  │
│   │   │  1️⃣ Clone מהריפו החיצוני               │     ┌──────────────┐     │  │
│   │   │  2️⃣ הורדת Submodules (אופציונלי)       │◄────┤   GitHub     │     │  │
│   │   │  3️⃣ הורדת Artifacts (אופציונלי)        │     │   GitLab     │     │  │
│   │   │  4️⃣ יצירת Git Bundle                   │     │   BitBucket  │     │  │
│   │   │  5️⃣ אריזה ל-tar.gz                     │     └──────────────┘     │  │
│   │   │                                         │                          │  │
│   │   └────────────────┬────────────────────────┘                          │  │
│   │                    │                                                    │  │
│   │                    │ יצירת Bundle                                       │  │
│   │                    ▼                                                    │  │
│   │            ┌───────────────┐                                           │  │
│   │            │ 📦 Bundle     │                                           │  │
│   │            │  .tar.gz      │                                           │  │
│   │            └───────┬───────┘                                           │  │
│   │                    │                                                    │  │
│   │                    │ העתקה ל-USB                                        │  │
│   │                    ▼                                                    │  │
│   │            ┌───────────────┐                                           │  │
│   │            │ 💾 USB Drive  │                                           │  │
│   │            │ (Disk-on-Key) │                                           │  │
│   │            └───────────────┘                                           │  │
│   │                                                                         │  │
│   └─────────────────────────────────────────────────────────────────────────┘  │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘
                                      │
                                      │ 🚶 העברה פיזית
                                      │    (הליכה עם ה-USB)
                                      │
                                      ▼
┌─────────────────────────────────────────────────────────────────────────────────┐
│                                                                                 │
│                        🔒 רשת פנימית מבודדת (AIR-GAPPED NETWORK)               │
│                                                                                 │
│   ┌─────────────────────────────────────────────────────────────────────────┐  │
│   │                                                                         │  │
│   │            ┌───────────────┐                                           │  │
│   │            │ 💾 USB Drive  │                                           │  │
│   │            │ (Disk-on-Key) │                                           │  │
│   │            └───────┬───────┘                                           │  │
│   │                    │                                                    │  │
│   │                    │ הכנסה למחשב                                        │  │
│   │                    ▼                                                    │  │
│   │   👨‍💻 מפתח                                                              │  │
│   │      │                                                                  │  │
│   │      │ מריץ moark-ingest-ui                                            │  │
│   │      ▼                                                                  │  │
│   │   ┌─────────────────────────────────────────┐                          │  │
│   │   │        ⛵ moark-ingest                  │                          │  │
│   │   │                                         │     ┌──────────────┐     │  │
│   │   │  1️⃣ סריקת ה-USB אוטומטית               │◄────┤   S3 Storage │     │  │
│   │   │  2️⃣ טעינת מילון המיפוי מ-S3            │     │  (mapping)   │     │  │
│   │   │  3️⃣ מיפוי שם חיצוני → שם פנימי         │     └──────────────┘     │  │
│   │   │  4️⃣ חילוץ ה-Bundle                     │                          │  │
│   │   │  5️⃣ Push לגיט הפנימי                   │     ┌──────────────┐     │  │
│   │   │  6️⃣ שמירת היסטוריה                     │────►│   GitLab     │     │  │
│   │   │                                         │     │   פנימי      │     │  │
│   │   └─────────────────────────────────────────┘     └──────────────┘     │  │
│   │                                                                         │  │
│   └─────────────────────────────────────────────────────────────────────────┘  │
│                                                                                 │
└─────────────────────────────────────────────────────────────────────────────────┘
```

---
